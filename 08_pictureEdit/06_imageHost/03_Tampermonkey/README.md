# 1. 项目功能

油猴脚本下载图片

# 2. 文件结构

```
01_picLinkDisplay.js                     # X图片下载的油猴脚本
02_picURL_xchina.js
03_picURL_everiaclub.js
```


# 3. 环境配置

### 1. `Tampermonkey`扩展安装

1. 安装`Tampermonkey`扩展：首先，你需要在你的浏览器上安装`Tampermonkey`扩展。

3. 创建新的用户脚本：
   - 打开Tampermonkey的控制面板。
   - 点击`“添加新脚本”`。
   - 将上述代码粘贴到编辑器中，替换掉默认的模板。
   - 保存脚本。

4. 使用脚本：
   - 脚本将自动在所有匹配的网页上运行（由`@match *://*/*`指定，这意味着所有网站）。
   - 页面中会显示一个`“获取图片链接”`的按钮。
   - 点击按钮后，会显示所有符合条件的图片链接，已经去除了`amp;`。


### 2. `01_picLinkDisplay.js`筛选X中链接

1. 功能：

   - 创建按钮：在页面左上角固定位置创建一个名为`“获取图片链接”`的按钮。
   - 显示链接容器：在页面左上角创建一个容器，用于显示获取到的图片链接。
   - 清理图片链接：点击按钮后，脚本会查找页面上的所有`图片链接`（符合特定CSS选择器），并清理链接中的amp;字符。
   - 过滤和显示链接：过滤符合特定条件（包含`https://pbs.twimg.com/media和format=jpg&name`的链接）的图片链接，并显示在链接容器中。
   - 添加下载功能：在每个显示的链接旁添加一个`“下载”`按钮。点击“下载”按钮后，脚本会下载该图片并以特定格式命名文件。


### 3. `02_picURL_xchina.js`

- 思路
   1. 创建按钮：在页面左上角固定位置创建一个名为`“获取图片链接”`的按钮。
   2. 显示链接容器：在页面左上角创建一个容器，用于显示获取到的图片链接。
   3. 清理图片链接：点击按钮后，只需要筛选`body`中`class=container`的`div`中的`src`连接。
   4. 过滤和显示链接：过滤符合特定条件的图片链接，并显示在链接容器中。
   5. 添加下载功能：在每个显示的链接旁添加一个“下载”按钮。点击“下载”按钮后，脚本会下载该图片并以特定格式命名文件。


### 4. `03_picURL_everiaclub.js`和`03_pic_everiaclub_download.py`

1. 由于存在跨域的问题，因此`03_picURL_everiaclub.js`脚本只是显示页面中的链接，不具备直接下载的功能。注意：由于页面采用懒加载方式，需要滑到页面底部才能获取所有链接。
2. 将脚本获取的所有链接保存到 `03_pic_url.txt` 文件中，然后使用 `03_pic_everiaclub_download.py` 脚本下载。

💎 `03_pic_everiaclub_download.py`

- 思路：在当前目录下有一个`03_pic_url.txt`文件，其中每一行都是一个jpg图片链接，编写python脚本下载图片，注意将图片保存为PNG格式，读取文件链接的时候忽略空行，使用本地socks5，1080端口代理下载。保存图片到 `D:\software\27_nodejs\海外风景` 目录下






